<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- Google site verification, do not remove -->
    <meta name="google-site-verification" content="V3zPYd6pZFm3oRhweiVTRbjETwWLS62wUoitWk4KFmw" />
    <!-- End of Google site verification -->
    <!-- Domain verification, do not remove -->
    <meta name="globalsign-domain-verification" content="d77HuFbkaXg5CVjeSwr7Q913KE6mFgsKO6YkhawWUW" />
     <!-- End of domain verification, do not remove -->

    <title>RikiTraki</title>
    <meta name="description" content="Welcome to RikiTraki, a GPS track sharing site. Use a map or a globe to explore our outdoor experiences and learn more about their locations.">
    <meta name="keywords" content="maps,hiking,biking,travel,leaflet,cesiumjs,gps,gpx">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta property="og:title" content="RikiTraki" />
    <meta property="og:image" content="https://www.rikitraki.com/images/rikitraki.png" />
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">

    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="bower_components/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="bower_components/leaflet.elevation/dist/Leaflet.Elevation-0.0.4.css" />
    <link rel="stylesheet" href="bower_components/leaflet.markercluster/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="bower_components/leaflet.markercluster/dist/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="bower_components/lightbox2/dist/css/lightbox.css" />
    <!-- endbower -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Fonts -->
    <link rel="stylesheet" href="components/fontello/css/fontello.css" />

    <!-- build: use this block later with processhtml to prepare dist-->
    <link rel="stylesheet" href="css/main.css">
    <!-- endbuild -->

    <!-- Google Analytics Code -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-64070309-1', 'auto');
      ga('send', 'pageview');

    </script>

  </head>
  <body>
    <!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <div id="navigationBar" class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" data-target="#navbarCollapse" data-toggle="collapse" class="navbar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
          <a href="." id="logo" class="pull-left"><img src="images/logonone.png"></a>
        </div>
        <div id="navbarCollapse" class="collapse navbar-collapse">
          <ul id="mapGlobeButton" class="nav navbar-nav">
            <li><a id="mapGlobeA" role="button" title="Globe" href="./?globe=yes"><span class="glyphicon icon-sphere" aria-hidden="true"></span></a></li>
          </ul>
          <ul class="nav navbar-nav nav-pills">
            <li>
              <a data-toggle="collapse" id="filter-btn" role="button" title="Set filter" href="#"><span id="filter-icon" class="glyphicon glyphicon-filter" aria-hidden="true"></span></a>
            </li>
            <li>
              <a data-toggle="collapse" id="tracks-btn" role="button" title="Find a track" href="#"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></a>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Zoom to tracks in..." role="button" aria-expanded="false"><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span></a>
              <ul id="goto-menu" class="dropdown-menu scrollable-menu" role="menu">
              </ul>
            </li>

          </ul>
          <ul class="nav navbar-nav nav-pills" id="uploadEditContainer">
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a data-toggle="collapse" id="about-btn" role="button" href="#"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span></a>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a data-toggle="collapse" id="user-btn" role="button" title="User" href="#"><span class="glyphicon glyphicon-user" aria-hidden="true"></span></a>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right nav-pills">
            <li>
              <a href="#" id="fb-btn" title="Share on Facebook" class="btn btn-social-icon btn-facebook">
                <i class="fa fa-facebook"></i>
              </a>
            </li>
            <li>
              <a href="https://twitter.com/" title="Share on Twitter" class="btn btn-social-icon btn-twitter custom-tweet-button">
                <i class="fa fa-twitter"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="modal fade" id="tracksModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Find a track in filtered list</h4>
            <input type="text" class="form-control" id="tracksSearch" placeholder="Search..." />
          </div>
          <div>
            <table id="tracksTable" class="table table-condensed table-hover">
              <thead>
                 <tr>
                  <th data-sort="string" data-sort-default="desc">&#10029;</th>
                  <th data-sort="string">Track</th>
                  <th data-sort="string">Difficulty</th>
                  <th data-sort="string">Region</th>
                  <th style="display:none">TrackId</th>
                </tr>
             </thead>
              <tbody>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Welcome to RikiTraki!</h4>
              <p>Please login if you wish to upload your own tracks and photos...</p>
            </div>
            <div class="modal-body">
                <div class="well">
                  <div>
                    <ul class="nav nav-tabs">
                      <li class="active"><a class="small" id="loginTab" href="#login" data-toggle="tab">Login...</a></li>
                      <li><a class="small" id="registerTab" href="#register" data-toggle="tab">or Register</a></li>
                    </ul>
                  </div>
                  <div class ="well well-sm">
                    <div id="userTabContent" class="tab-content">
                      <div class="tab-pane active in" id="login">
                        <form class="form-horizontal" role="form">
                            <div class="form-group">
                              <label class="control-label col-sm-2">Username</label>
                              <div class="col-sm-10">
                                <input type="text" id="login-username" placeholder="User name" class="form-control" required>
                              </div>
                            </div>
                            <div class="form-group">
                              <label class="control-label col-sm-2">Password</label>
                              <div class="col-sm-10">
                                <input type="password" id="login-password" placeholder="Password" class="form-control">
                              </div>
                            </div>
                            <div class="form-group">
                              <div class="col-sm-offset-2 col-sm-10">
                                <button id="loginButton" href="" class="btn btn-default">Login</button>
                              </div>
                            </div>
                            <div class="alert alert-danger" id="loginError" role="alert" style="display: none">
                              <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                              <span class="sr-only">Error:</span>
                              <span id="loginErrorText"></span>
                            </div>
                            <hr>
                            <div class="form-group">
                              <div class="col-sm-offset-2 col-sm-10">
                                <a id="forgotPasswordLink" data-toggle="collapse" href="#forgotPanel" aria-expanded="false">Forgot password and/or username?</a>
                              </div>
                            </div>
                            <div id="forgotPanel" class="collapse">
                              <div class="form-group has-feedback">
                                <label class="control-label col-sm-2">Email</label>
                                <div class="col-sm-10">
                                  <input type="email" id="forgot-email" placeholder="Registered email address" class="form-control">
                                  <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                                </div>
                              </div>
                              <div class="form-group">
                                <div class="col-sm-offset-2 col-sm-10">
                                  <button id="forgotButton" href="" class="btn btn-default">Reset</button>
                                </div>
                              </div>
                              <div class="alert alert-warning" id="forgotMessage" role="alert" style="display: none">
                                <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                                <span class="sr-only">Info:</span>
                                Your password can be reset now. Please check your email for instructions within 24 hours.
                              </div>
                              <div class="alert alert-danger" id="forgotError" role="alert" style="display: none">
                                <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                                <span class="sr-only">Error:</span>
                                <span id="forgotErrorText"></span>
                              </div>
                            </div>
                        </form>

                      </div>
                      <div class="tab-pane fade" id="register">
                        <form class="form-horizontal" role="form" id="tab">
                          <div class="form-group has-feedback">
                            <label class="control-label col-sm-4">Username</label>
                            <div class="col-sm-8">
                              <input type="text" id="reg-username" placeholder="User name (6-40 characters)" class="form-control">
                              <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                            </div>
                          </div>
                          <div class="form-group has-feedback">
                            <label class="control-label col-sm-4">Email</label>
                            <div class="col-sm-8">
                              <input type="email" id="reg-email" placeholder="Valid email address" class="form-control">
                              <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                            </div>
                          </div>
                          <div class="form-group">
                            <p class="col-sm-offset-4 col-sm-8">We will not send you spam nor share your email address.</p>
                          </div>

                          <div class="form-group has-feedback">
                            <label class="control-label col-sm-4">Password</label>
                            <div class="col-sm-8">
                              <input type="password" id="reg-password" placeholder="Password (6-18 characters)" class="form-control">
                              <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                            </div>
                          </div>
                          <div class="form-group has-feedback">
                            <label class="control-label col-sm-4">Re-enter password</label>
                            <div class="col-sm-8">
                              <input type="password" id="reg-repassword" placeholder="Re-enter password (must match password)" class="form-control">
                              <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                           </div>
                          </div>
                          <hr>
                          <div class="form-group">
                            <p class="col-sm-offset-4 col-sm-8">By registering you agree to upload only GPX files and photos that you own, and you agree to release all the content you
                            upload to the <a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank">public domain</a>.</p>
                          </div>

                          <div class="form-group">
                            <div class="col-sm-offset-4 col-sm-8">
                              <button id="registerButton" class="btn btn-default">Register</button>
                            </div>
                          </div>

                          <div class="alert alert-warning" id="registrationMessage" role="alert" style="display: none">
                            <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                            <span class="sr-only">Info:</span>
                            Welcome to RikiTraki! Please check your email to activate your account.
                          </div>

                          <div class="alert alert-danger" id="registrationError" role="alert" style="display: none">
                            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                            <span class="sr-only">Error:</span>
                            <span id="registrationErrorText"></span>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
          </div>
      </div>
    </div>


    <div class="modal fade" id="userModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Hi <span id="hi-username"></span>!</h4>
              <p>Log out, update, or remove your user profile...</p>
              <a id="logoffLink" href="">Log out of Rikitraki</a>
            </div>
            <div class="modal-body">
              <div class="well">
                <div>
                  <ul class="nav nav-tabs">
                    <li class="active"><a class="small" id="updateProfileTab" href="#update" data-toggle="tab">Update</a></li>
                    <li style="display: none"><a class="small" id="removeTab" href="#remove" data-toggle="tab">Remove profile</a></li>
                  </ul>
                </div>
                <div class ="well well-sm">
                  <div id="userTabContent" class="tab-content">
                    <div class="tab-pane active in" id="update">
                      <form class="form-horizontal" role="form" id="tab">
                        <div class="form-group has-feedback">
                          <label class="control-label col-sm-5" for="password">Enter your password</label>
                          <div class="col-sm-7">
                            <input type="password" id="usr-oldpassword" placeholder="Password" class="form-control">
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                        </div>
                        <div class="form-group has-feedback">
                          <label class="control-label col-sm-5">Update your email</label>
                          <div class="col-sm-7">
                            <input type="email" id="usr-email" placeholder="Enter new email" class="form-control">
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                        </div>
                        <div class="form-group has-feedback">
                          <label class="control-label col-sm-5" for="password">Update your password</label>
                          <div class="col-sm-7">
                            <input type="password" id="usr-password" placeholder="Enter new password" class="form-control">
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                        </div>
                        <div class="form-group has-feedback">
                          <label class="control-label col-sm-5" for="password">Re-enter new password</label>
                          <div class="col-sm-7">
                            <input type="password" id="usr-repassword" placeholder="Re-enter new password" class="form-control">
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                        </div>
                        <hr>
                        <div class="form-group">
                          <div class="col-sm-offset-5 col-sm-7">
                            <button id="updateProfileButton" class="btn btn-default" disabled="disabled">Update</button>
                          </div>
                        </div>

                        <div class="alert alert-warning" id="profileMessage" role="alert" style="display: none">
                          <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                          <span class="sr-only">Info:</span>
                          Your profile has been updated.
                        </div>
                        <div class="alert alert-danger" id="profileError" role="alert" style="display: none">
                          <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                          <span class="sr-only">Error:</span>
                          <span id="profileErrorText"></span>
                        </div>

                      </form>
                    </div>
                    <div class="tab-pane" id="remove" style="display: none">
                      <form class="form-horizontal" role="form" id="tab">
                        <div class="form-group has-feedback">
                          <label class="control-label col-sm-5">Enter your password</label>
                          <div class="col-sm-7">
                            <input type="password" autocomplete="off" id="rem-password" placeholder="Password" class="form-control">
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-5">Are you sure?</label>
                           <div class="col-sm-7">
                              <div class="checkbox">
                                <label><input type="checkbox" id="confirmRemoval" value="">Check to confirm. Cannot be undone.</label>
                              </div>
                            </div>
                        </div>
                        <div class="form-group">
                          <div class="col-sm-offset-5 col-sm-7">
                             <button class="btn btn-default" id="removeProfileButton" disabled="disabled">Proceed</button>
                          </div>
                        </div>
                        <div class="alert alert-warning" id="removeMessage" role="alert" style="display: none">
                          <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                          <span class="sr-only">Info:</span>
                          Your profile has been removed.
                        </div>
                        <div class="alert alert-danger" id="removeProfileError" role="alert" style="display: none">
                          <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                          <span class="sr-only">Error:</span>
                          <span id="removeProfileErrorText"></span>
                        </div>
                      </form>
                    </div>
                  </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="uploadTrackModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Track upload</h4>
            <p>Enter track information below...</p>
          </div>
          <div class="modal-body">
            <div class="well">

                <div>
                  <ul class="nav nav-tabs">
                    <li class="active"><a class="small" id="trackInfoTab" href="#track-info-tab" data-toggle="tab">Info</a></li>
                    <li><a class="small" id="phototsTab" href="#track-photos-tab" data-toggle="tab">Photos</a></li>
                  </ul>
                </div>
                <div class ="well well-sm">
                  <div id="trackInfoTabContent" class="tab-content">
                    <div class="tab-pane active in" id="track-info-tab">

                      <form class="form-horizontal" role="form">
                        <div class="form-group has-feedback">
                          <label class="control-label col-sm-3">GPX file (up to 4MB)</label>
                          <div class="col-sm-9">
                            <input type="file" id="track-file" class="form-control">
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                        </div>
                        <div class="form-group has-feedback">
                          <label class="control-label col-sm-3">Track name</label>
                          <div class="col-sm-9">
                            <input type="text" maxLength="200" id="track-name" placeholder="Enter track name" class="form-control">
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                        </div>
                        <div class="form-group has-feedback">
                          <label class="control-label col-sm-3">Track description</label>
                          <div class="col-sm-9">
                            <textarea maxLength="5000" id="track-description" rows="5" placeholder="Enter track description" class="form-control" style="resize: vertical;"></textarea>
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-3">Favorite?</label>
                          <div class="checkbox col-sm-9">
                            <label><input type="checkbox" id="track-favorite" value="True"></label>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-3">Difficulty</label>
                          <div class="col-sm-9">
                            <label class="radio-inline"><input type="radio" name="difficultyRadioOptions" id="track-level" value="Easy" checked>Easy</label>
                            <label class="radio-inline"><input type="radio" name="difficultyRadioOptions" id="track-level" value="Moderate">Moderate</label>
                            <label class="radio-inline"><input type="radio" name="difficultyRadioOptions" id="track-level" value="Difficult">Difficult</label>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-3">Activity</label>
                          <div class="col-sm-4">
                            <select class="form-control" id="track-activity">
                              <option>Hiking</option>
                              <option>Biking</option>
                              <option>Boating</option>
                              <option>Offroad</option>
                              <option>Motorcycling</option>
                              <option>Flying</option>
                              <option>Skiing</option>
                              <option>Snowshoeing</option>
                              <option>Getting There</option>
                            </select>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-3">Region tags</label>
                          <div class="col-sm-4">
                            <select class="form-control crs-country" data-region-id="track-region" data-default-value="United States" id="track-country">
                            </select>
                          </div>
                          <div class="col-sm-5">
                            <select class="form-control" id="track-region">
                            </select>
                          </div>

                        </div>
                        <div class="alert alert-danger" id="uploadError" role="alert" style="display: none">
                          <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                          <span class="sr-only">Error:</span>
                          <span id="uploadErrorText"></span>
                        </div>

                      </form>
                    </div>

                    <div class="tab-pane" id="track-photos-tab">

                      <form class="form-horizontal" role="form" id="tab">
                        <div class="form-group has-feedback">
                          <label class="control-label col-sm-3">Up to 8 jpeg images</label>
                          <div class="col-sm-1">
                            <input type="file" multiple accept="image/*" id="track-photo-files" class="form-control" style="display: none">
                            <button id="selectUploadPhotos" class="btn btn-default" type="button"><span class="glyphicon glyphicon-picture"></span></button>
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                          <span class="help-block col-sm-4">Images larger than 1MB will be resized</span>
                          <label class="control-label col-sm-2" title="Use this for geotagging if your photos don't have location info and your camera's clock is shifted (e.g., due to wrong time zone)">Time offset (hrs)</label>
                          <div class="col-sm-2">
                            <input class="form-control" id="track-time-offset" type="number" value="0" max="+14" min="-14" step=".5">
                          </div>
                        </div>
                        <div class="form-group">
                          <div id="track-photos-container" style="padding-left: 15px;">
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>

                <div class="alert alert-warning msg-with-spinner" id="uploadingMessage" role="alert" style="display: none">
                  <div id="uploadSpinner"></div>
                  <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                  <span class="sr-only">Info:</span>
                  Uploading...
                </div>
                <div class="alert alert-warning" id="uploadMessage" role="alert" style="display: none">
                  <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                  <span class="sr-only">Info:</span>
                  Track uploaded.
                </div>

                <form class="form-horizontal" role="form">
                  <div class="form-group">
                    <div class="col-sm-offset-3 col-sm-9">
                      <button id="uploadButton" href="" class="btn btn-default">Upload</button>
                    </div>
                  </div>

                </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="editTrackModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Edit track info</h4>
            <p>Edit track information below...</p>
          </div>
          <div class="modal-body">
            <div class="well">
                <div>
                  <ul class="nav nav-tabs">
                    <li class="active"><a class="small" id="editInfoTab" href="#edit-track-info-tab" data-toggle="tab">Info</a></li>
                    <li><a class="small" id="editPhotosTab" href="#edit-track-photos-tab" data-toggle="tab">Photos</a></li>
                    <li><a class="small" id="removeTrackTab" href="#remove-track-info-tab" data-toggle="tab">Remove track</a></li>
                  </ul>
                </div>
                <div class ="well well-sm">
                  <div id="editTrackInfoTabContent" class="tab-content">
                    <div class="tab-pane active in" id="edit-track-info-tab">

                      <form class="form-horizontal" role="form">
                        <div class="form-group has-feedback">
                          <label class="control-label col-sm-3">Track name</label>
                          <div class="col-sm-9">
                            <input type="text" maxLength="200" id="edit-track-name" placeholder="Enter track name" class="form-control">
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                        </div>
                        <div class="form-group has-feedback">
                          <label class="control-label col-sm-3">Track description</label>
                          <div class="col-sm-9">
                            <textarea maxLength="5000" id="edit-track-description" rows="5" placeholder="Enter track description" class="form-control" style="resize: vertical;"></textarea>
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-3">Favorite?</label>
                          <div class="checkbox col-sm-9">
                            <label><input type="checkbox" id="edit-track-favorite" value="True"></label>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-3">Difficulty</label>
                          <div class="col-sm-9">
                            <label class="radio-inline"><input type="radio" name="difficultyRadioOptions" id="edit-track-level" value="Easy" checked>Easy</label>
                            <label class="radio-inline"><input type="radio" name="difficultyRadioOptions" id="edit-track-level" value="Moderate">Moderate</label>
                            <label class="radio-inline"><input type="radio" name="difficultyRadioOptions" id="edit-track-level" value="Difficult">Difficult</label>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-3">Activity</label>
                          <div class="col-sm-4">
                            <select class="form-control" id="edit-track-activity">
                              <option>Hiking</option>
                              <option>Biking</option>
                              <option>Boating</option>
                              <option>Offroad</option>
                              <option>Motorcycling</option>
                              <option>Flying</option>
                              <option>Skiing</option>
                              <option>Snowshoeing</option>
                              <option>Getting There</option>
                            </select>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-3">Region tags</label>
                          <div class="col-sm-4">
                            <select class="form-control crs-country" data-default-value="" data-region-id="edit-track-region" data-show-default-option="false" id="edit-track-country">
                            </select>
                          </div>
                          <div class="col-sm-5">
                            <select class="form-control" data-default-value="" data-show-default-option="false" id="edit-track-region">
                            </select>
                          </div>
                        </div>
                      </form>
                    </div>
                    <div class="tab-pane" id="edit-track-photos-tab">
                      <form class="form-horizontal" role="form" id="tab">
                        <div id="edit-track-file-selector" class="form-group has-feedback" style="display: none">
                          <label class="control-label col-sm-3">Add jpeg images (8 max)</label>
                          <div class="col-sm-1">
                            <input type="file" multiple accept="image/*" id="edit-track-photo-files" class="form-control" style="display: none">
                            <button id="selectEditPhotos" class="btn btn-default" type="button"><span class="glyphicon glyphicon-picture"></span></button>
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                          <span class="help-block col-sm-4">Images larger than 1MB will be resized</span>
                          <label class="control-label col-sm-2" title="Use this for geotagging if your photos don't have location info and your camera's clock is shifted (e.g., due to wrong time zone)">Time offset (hrs)</label>
                          <div class="col-sm-2">
                            <input class="form-control" id="edit-track-time-offset" type="number" value="0" max="+14" min="-14" step=".5">
                          </div>
                        </div>
                        <div class="form-group">
                          <div id="edit-track-photos-container" style="padding-left: 15px;">
                          </div>
                        </div>
                        <div class="form-group">
                          <div id="edit-track-photos-delete-drop-zone" class="col-sm-offset-11 col-sm-1">
                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                          </div>
                        </div>
                      </form>
                    </div>
                    <div class="tab-pane" id="remove-track-info-tab">
                      <form class="form-horizontal" role="form" id="tab">
                        <div class="form-group">
                          <label class="control-label col-sm-4">Are you sure?</label>
                            <div class="checkbox">
                              <label><input type="checkbox" id="confirmTrackRemoval" value="">Check to confirm. This action cannot be undone.</label>
                            </div>
                        </div>
                        <div class="form-group">
                          <div class="col-sm-offset-4 col-sm-8">
                             <button class="btn btn-default" id="removeTrackButton" disabled="disabled">Proceed</button>
                          </div>
                        </div>
                        <div class="alert alert-warning" id="removeTrackMessage" role="alert" style="display: none">
                          <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                          <span class="sr-only">Info:</span>
                          Track has been removed.
                        </div>
                        <div class="alert alert-danger" id="removeTrackError" role="alert" style="display: none">
                          <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                          <span class="sr-only">Error:</span>
                          <span id="removeTrackErrorText"></span>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>


                <form class="form-horizontal" role="form">
                  <div class="form-group">
                    <div class="col-sm-offset-3 col-sm-9">
                      <button id="saveButton" href="" class="btn btn-default">Save</button>
                    </div>
                  </div>
                </form>

                <div class="alert alert-warning msg-with-spinner" id="savingMessage" role="alert" style="display: none">
                  <div id="saveSpinner"></div>
                  <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                  <span class="sr-only">Info:</span>
                  Saving...
                </div>

                <div class="alert alert-warning" id="editMessage" role="alert" style="display: none">
                  <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                  <span class="sr-only">Info:</span>
                  Track info saved.
                </div>

                <div class="alert alert-danger" id="editError" role="alert" style="display: none">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <span class="sr-only">Error:</span>
                  <span id="editErrorText"></span>
                </div>


            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="filterModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Filter tracks</h4>
            <p>Enter filter criteria below...</p>
          </div>
          <div class="modal-body">
            <div class="well">
                <div>
                  <ul class="nav nav-tabs">
                    <li class="active"><a class="small" id="filterTab" href="#filter-tab" data-toggle="tab">Filter</a></li>
                  </ul>
                </div>
                <div class ="well well-sm">
                  <div id="filterTabContent" class="tab-content">
                    <div class="tab-pane active in" id="filter-tab">

                      <form class="form-horizontal" role="form">
                        <div class="form-group has-feedback">
                          <label class="control-label col-sm-3">By username</label>
                          <div class="col-sm-2">
                            <label class="checkbox-inline"><input type="checkbox" id="filter-me" disabled value="me">Me</label>
                          </div>
                          <div class="col-sm-7">
                            <input type="text" maxLength="200" id="filter-username" placeholder="User name begins with..." class="form-control">
                            <span class="glyphicon form-control-feedback" aria-hidden="true"></span>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-3">Only favorite?</label>
                          <div class="checkbox col-sm-9">
                            <label><input type="checkbox" id="filter-favorite" value="True"></label>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-3">By difficulty</label>
                          <div class="col-sm-9">
                            <label class="checkbox-inline"><input type="checkbox" id="filter-level" value="Easy">Easy</label>
                            <label class="checkbox-inline"><input type="checkbox" id="filter-level" value="Moderate">Moderate</label>
                            <label class="checkbox-inline"><input type="checkbox" id="filter-level" value="Difficult">Difficult</label>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-3">By activity</label>
                          <div class="col-sm-4">
                            <select multiple class="form-control" id="filter-activity" size="6">
                              <option>Hiking</option>
                              <option>Biking</option>
                              <option>Boating</option>
                              <option>Offroad</option>
                              <option>Motorcycling</option>
                              <option>Flying</option>
                              <option>Skiing</option>
                              <option>Snowshoeing</option>
                              <option>Getting There</option>
                            </select>
                          </div>
                        </div>
                        <div class="form-group" style="display: none">
                          <label class="control-label col-sm-3">Near me by</label>
                          <div class="col-sm-2">
                            <input type="number" id="filter-near" class="form-control">
                          </div>
                          <div class="col-sm-7">
                            <label class="radio-inline"><input type="radio" name="nearRadioOptions" id="filter-near-units" value="Km" checked>Km</label>
                            <label class="radio-inline"><input type="radio" name="nearRadioOptions" id="filter-near-units" value="Miles">Miles</label>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="control-label col-sm-3">By region tags</label>
                          <div class="col-sm-4">
                            <select class="form-control crs-country" data-default-value="" data-region-id="filter-region" id="filter-country">
                            </select>
                          </div>
                          <div class="col-sm-5">
                            <select class="form-control" data-default-value="" id="filter-region">
                            </select>
                          </div>
                        </div>

                        <div class="form-group">
                          <div class="col-sm-offset-3 col-sm-9">
                            <button id="applyFilterButton" href="" class="btn btn-default">Apply filter</button>
                            <button id="clearFilterButton" href="" class="btn btn-default">Clear filter</button>
                          </div>
                        </div>

                        <div class="alert alert-warning" id="filterMessage" role="alert" style="display: none">
                          <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                          <span class="sr-only">Info:</span>
                          Filter applied.
                        </div>

                        <div class="alert alert-danger" id="filterError" role="alert" style="display: none">
                          <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                          <span class="sr-only">Error:</span>
                          <span id="filterErrorText"></span>
                        </div>

                      </form>
                    </div>
                  </div>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="trackNotAvailable" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Track details not available</h4>
          </div>
          <div class="modal-body">
            <p>The detailed information for this track cannot be shown because it has been filtered out. To view it, please expand the filter set.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <img src="images/logolarge.png" style="height: 42px"><br><small><b>v0.7.0<sup>Beta</sup> by Ricardo Morin</b></small>
          </div>
          <div class="modal-body">
            <h4>About this site</h4>
            Welcome to the RikiTraki GPS track sharing site.
            Use the slippy map to explore our outdoor experiences and learn more about their locations. Tracks, markers and photos
            are clickable. The controls at the top left part of the map provide for zooming, base map and layer display control. The control at the bottom left
            is an interactive elevation profile widget. The track label at the top right provides track information and a slide show (if pictures are available.)<br><br>
            You are welcome to register if you wish to upload and share your own tracks on this site.<br><br>
            <b>This is a work in progress, currently in Beta.</b> Please report bugs and omissions. We are continually testing and enhancing this application over time.<br><br>
            To learn more about this project, head over to the <a href="http://blog.rikitraki.com" target="_blank">blog.</a>
            <div>
              <h4>Feedback and questions are greatly appreciated</h4>
              <a href="https://twitter.com/intent/tweet?screen_name=jimmieangel" class="twitter-mention-button" data-related="jimmieangel">Tweet to @jimmieangel</a>
              <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
              </script>
            </div> <!-- feedback -->
            <hr>
            <a class="btn btn-default" data-toggle="collapse" href="#buildingBlocks" aria-expanded="false" aria-controls="collapseExample">Geek info...</a>
            <div class="collapse" id="buildingBlocks">
            <h4>Building blocks</h4>
              This project uses free and open source components and data as shown below. You are welcome to <a href="https://github.com/jimmyangel/rikitraki" target="_blank">fork it</a> and contribute to its development.<br><br>
              <b>Core mapping framework:</b>
              <ul>
               <li>The powerful <a href="http://leafletjs.com/" target="_blank">Leaflet</a> Javascript library for projection maps</li>
               <li>The amazing <a href="http://cesiumjs.org/" target="_blank">Cesium</a> Javascript library for globe and 3D mapping</li>
              </ul>
              <b>Components and plugins:</b>
                <ul>
                  <li><a href="http://getbootstrap.com/" target="_blank">Bootstrap</a> for mobile friendly navigation bar and dialogs</li>
                  <li><a href="https://jquery.com/" target="_blank">jQuery</a> mobile-friendly Javascript utility library</li>
                  <li><a href="https://github.com/MrMufflon/Leaflet.Elevation" target="_blank">Leaflet.Elevation</a> to display trail elevation profile</li>
                  <li><a href="https://github.com/jseppi/Leaflet.MakiMarkers" target="_blank">Leaflet.MakiMarkers</a> to display nice Maki icons in markers</li>
                  <li><a href="http://fortawesome.github.io/Font-Awesome/" target="_blank">Font Awesome</a> icons</li>
                  <li><a href="https://icomoon.io/" target="_blank">IcoMoon</a> icons</li>
                  <li><a href="http://lokeshdhakar.com/projects/lightbox2/" target="_blank">Lightbox2</a> to display pictures and slideshow</li>
                  <li><a href="https://github.com/mapbox/leaflet-omnivore" target="_blank">Omnivore</a> plug-in to consume GPS tracks in .GPX format</li>
                  <li><a href="http://spin.js.org/" target="_blank">spin.js</a> spinning activity indicator</li>
                  <li><a href="http://joequery.github.io/Stupid-Table-Plugin/" target="_blank">Stupid-table-plugin</a> super simple table sort plug-in</li>
                  <li><a href="https://github.com/blueimp/JavaScript-Canvas-to-Blob/" target="_blank">JavaScript Canvas to Blob</a> polyfill for standard canvas.toBlob method</li>
                  <li><a href="https://github.com/benkeen/country-region-selector/" target="_blank">Country-Region-Selector</a> utility for selecting coordinated country/region</li>
                  <li><a href="https://github.com/RubaXa/Sortable" target="_blank">RubaXa Sortable</a> library for drag n'drop support</li>
                  <li><a href="http://publicdomainvectors.org/" target="_blank">publicdomainvectors.org</a> public domain icons</li>
               </ul>
              <b>Base maps:</b>
                <ul>
                  <li><a href="http://www.thunderforest.com/" target="_blank">Thunderforest</a> outdoors map that shows topographic features and information relevant to hiking</li>
                  <li><a href="http://openstreetmap.org" target="_blank">Open Street Map</a> that shows roads, labels and geographic features</li>
                  <li><a href="http://www.arcgis.com/home/item.html?id=10df2279f9684e4a9f6a7f08febac2a9" target="_blank">ESRI World Imagery</a> to show satellite and aerial imagery</li>
                  <li><a href="http://www.usgs.gov/" target="_blank">US Geological Service</a> official topographic map for the US only</li>
                  <li><a href="http://www.arcgis.com/home/item.html?id=99cd5fbd98934028802b4f797c4b1732" target="_blank">ESRI USA Topo Maps</a> that present detailed topographic maps for the US only</li>
                </ul>
              <b>Server side:</b>
                <ul>
                  <li><a href="https://nodejs.org/en/" target="_blank">Node js</a> server side javascript engine</li>
                  <li><a href="http://expressjs.com/" target="_blank">Express</a> framework for web serving and REST APIs</li>
                  <li><a href="https://www.mongodb.org/" target="_blank">MongoDB</a> NoSQL document oriented database</li>
                  <li><a href="http://www.mailgun.com/" target="_blank">MailGun</a> email service</li>
                  <li><a href="https://www.openshift.com/" target="_blank">OpenShift</a> hosting service</li>
                </ul>
            </div>
          </div> <!-- modal body -->
        </div> <!-- modal content -->
      </div> <!-- modal dialog -->
    </div> <!-- modal -->

    <div class="modal fade" id="welcomeMessage" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content" style="padding: 5%;">
          <div class="modal-body">
            <h3><b>Welcome to RikiTraki</b>, a GPS track sharing site. Explore our outdoor experiences and learn more about their locations. View tracks in 2D and 3D.<br><br>
            Create an account if you wish to upload and share your own GPS tracks.</h3><br>
            <div>
              <label class="checkbox-inline"><input type="checkbox" id="welcome-optout"><i>Do not show this again</i></label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="map"></div>
    <div id="globe" class="leaflet-container" style="position: relative;">
      <div>
        <div class="leaflet-top leaflet-left">
          <div class="leaflet-bar leaflet-control">
            <a class="leaflet-control-zoom-in" href="#" title="Zoom in">+</a>
            <a class="leaflet-control-zoom-out" href="#" title="Zoom out">-</a>
          </div>
          <div class="leaflet-control leaflet-bar" id="2Dbutton">
            <a id="terrain-control-2d" href="#" style="text-shadow: 2px 2px 2px #666666;" href="#" title="2D Map">2D</a>
          </div>
          <div class="leaflet-control leaflet-bar" style="display: none;">
            <a id="globe-control-north" href="#" title="North">N</a>
          </div>
          <div class="leaflet-control leaflet-bar">
            <a id="globe-control-refresh" href="#" title="Reset view"><span class="glyphicon glyphicon-refresh" aria-hidden="true"></span></a>
          </div>
          <div class="leaflet-control leaflet-bar">
            <a id="vd-play" style="display: none;" href="#" title="Play/Pause"><span class="glyphicon glyphicon-play blink_me" aria-hidden="true"></span></a>
          </div>
          <div id="vd-speed" class="leaflet-control leaflet-bar" style="display: none;">
            <a id="vd-faster" href="#" title="Faster"><i class="icon-fast-fw"></i></a>
            <a id="vd-slower" href="#" title="Slower"><i class="icon-fast-fw-outline"></i></a>
          </div>
          <div id="layer-control" class="leaflet-control leaflet-control-layers" aria-haspopup="true">
            <a class="leaflet-control-layers-toggle" href="#" title="Layers"></a>
            <form class="leaflet-control-layers-list">
              <div id="basemap-layer-control" class="leaflet-control-layers-base">
              </div>
              <div id="overlay-layer-control" style="display: none;">
                <div class="leaflet-control-layers-separator"></div>
                <div class="leaflet-control-layers-overlays">
                  <label><input id="show-markers" type="checkbox" class="leaflet-control-layers-selector" checked=""><span> Show markers for all tracks</span></label>
                  <label id="show-photos-label"><input id="show-photos" type="checkbox" class="leaflet-control-layers-selector" checked=""><span> Show track photos</span></label>
                </div>
              </div>
            </form>
          </div>
        </div>
        <div id="infoPanel" class="leaflet-top leaflet-right"></div>

        <div class="leaflet-bottom leaflet-right">
          <div id="progressBar" style="width: 40%; float: right; padding: 1px 8px; display: none;">
            <div class="progress">
              <div class="progress-bar" role="progressbar" style="width: 0%;"></div>
            </div>
          </div>
          <div class="help3d leaflet-control"><div>Control-Drag to rotate and tilt</div></div>
          <div id="creditContainer" class="leaflet-control-attribution leaflet-control"></div>
        </div>
      </div>

      <div id="trackPopUp" style="display: none;">
        <div id="trackPopUpContent" class="leaflet-popup" style="z-index: 10;">
          <a class="leaflet-popup-close-button" href="#">×</a>
          <div class="leaflet-popup-content-wrapper">
            <div id="trackPopUpLink" class="leaflet-popup-content" style="max-width: 300px;">
            </div>
          </div>
            <div class="leaflet-popup-tip-container">
              <div class="leaflet-popup-tip"></div>
            </div>
        </div>
      </div>
   </div>
   <div id="loadingOverlay">
     <div id="loadingSpinner"></div>
   </div>

    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="bower_components/leaflet/dist/leaflet.js"></script>
    <script src="bower_components/leaflet-omnivore/leaflet-omnivore.min.js"></script>
    <script src="bower_components/d3/d3.min.js"></script>
    <script src="bower_components/leaflet.elevation/dist/Leaflet.Elevation-0.0.4.min.js"></script>
    <script src="bower_components/Leaflet.MakiMarkers/Leaflet.MakiMarkers.js"></script>
    <script src="bower_components/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
    <script src="bower_components/spin.js/spin.js"></script>
    <script src="bower_components/jquery-stupid-table/stupidtable.min.js"></script>
    <script src="bower_components/lightbox2/dist/js/lightbox.min.js"></script>
    <script src="bower_components/exif-js/exif.js"></script>
    <script src="bower_components/blueimp-canvas-to-blob/js/canvas-to-blob.min.js"></script>
    <script src="bower_components/javascript-state-machine/state-machine.min.js"></script>

    <!-- endbower -->
    <script src="bower_components/country-region-selector/dist/jquery.crs.min.js"></script>
    <script src="bower_components/Sortable/jquery.fn.sortable.min.js"></script>

    <!-- build: use this block later with processhtml to prepare dist -->
    <script src="bower_components/spin.js/jquery.spin.js"></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/forms.js"></script>
    <script src="js/data.js"></script>
    <script src="js/mapper.js"></script>
    <script src="js/main.js"></script>
    <!-- endbuild -->


</body>
</html>
